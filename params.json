{"name":"Component-loader-js","tagline":"Lightweight JavaScript component loader with pub/sub between components - instantiates component classes when a data-component attribute with the same name is found in the markup.","body":"# component-loader-js\r\n\r\nThis module is a lightweight JavaScript component loader implemented and exposed as a module using ES2015 (ES6) syntax _(an ES5 version is provided in the dist/es5/ folder)_.\r\n\r\n\r\n## How it works\r\nComponents are detected in the markup using the `data-component` attribute and the corresponding JavaScript component classes is automatically instantiated.\r\n\r\n`<div data-component=\"Header\">` => `new Header()`\r\n\r\n\r\n## Benefits\r\nThis approach is great for organising self contained components and very useful for CMS scenarios where components may be moved between pages at any time without modifying the JavaScript.\r\n\r\nThe componentLoader will instantiate a new component for each instance of the class in the markup.\r\n\r\n* You can have multiple instances of the same component on a page.\r\n* You can  have multiple components registered on the same DOM element.\r\n* Easy communication between components using built in pub/sub\r\n\r\n\r\n\r\n## Installing\r\nInstall using npm or bower.\r\n\r\n### NPM\r\n`$ npm install component-loader-js`\r\n\r\n```JavaScript\r\n// this includes the ES6 module by default\r\nimport ComponentLoader from './node_modules/component-loader-js';\r\nconst componentLoader = new ComponentLoader();\r\n```\r\n\r\n### Bower\r\n`$ bower install component-loader-js`\r\n\r\n```JavaScript\r\n// example loading ES5 module\r\n<script src=\"bower_components/component-loader-js/dist/es5/component-loader.min.js\"></script>\r\n```\r\n\r\n```JavaScript\r\nvar componentLoader = new ComponentLoader();\r\n```\r\n\r\n\r\n## Registering components\r\n \r\nTo register a component with the componentLoader, either pass its class to the constructor() or the register() function as an object {componentName: classDefenition}. You can register multiple components at the same time.\r\n \r\n```JavaScript\r\nnew ComponentLoader({Header}); \r\n\r\n// or register later using register()\r\n\r\ncomponentLoader.register({Header});\r\n```\r\n\r\n_or using ES5 syntax: ```new ComponentLoader({Header: Header});```_\r\n\r\n\r\n## Detecting components\r\nUse the `scan()` function to tell the component loader to scan the DOM and initialize newly detected components and destroy previously instantiated components that have been removed from the markup. \r\n\r\n```JavaScript\r\ncomponentLoader.scan();\r\n```\r\n\r\nMake sure to `scan()` on page load and whenever you modify the markup - for instance after using PJAX to load a new page and replace the markup.\r\n\r\n\r\n\r\n## Writing a component\r\nWe provide a component base class that you can extend to be up and running in no time.\r\n\r\n```JavaScript\r\nimport Component from './node_modules/component-loader/dist/es6/component';\r\n\r\nclass Header extends Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper(...arguments);\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tsuper.destroy();\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports = Header\r\n```\r\n\r\n\r\n\r\n## API Docs\r\n\r\n### ComponentLoader Methods\r\n\r\n`ComponentLoader.constructor(componentsHash, context)`\r\n- Constructor. \r\n\r\n- `componentHash` - Optional collection of available components: {componentName: classDefinition}\r\n- `context` - Optional DOM node to search for components. Defaults to document.\r\n\r\n\r\n`ComponentLoader.scan(data)` \r\n- Scan the DOM, initialize new components and destroy removed components. Call this on page load and whenever you modify the markup - for instance after using PJAX to load new page.\r\n\r\n- `data` - is optional and will be passed to the component constructor.\r\n\r\n`ComponentLoader.register(componentsHash)`\r\n- Add component(s) to collection of available components\r\n\r\n`ComponentLoader.unregister(componentName)`\r\n- Remove component from collection of available components\r\n\r\n`ComponentLoader.publish(topic, args...)`\r\n- Publish an event to other components\r\n\r\n`ComponentLoader.subscribe(topic, callback, context)`\r\n- Subscribe to an event from other components\r\n\r\n`ComponentLoader.unsubscribe(topic, callback)`\r\n- Unsubscribe from an event from other components\r\n\r\n\r\n\r\n### Component Methods\r\n\r\nA base Component is provided which can be extended to get access to the following methods:\r\n\r\n`Component.constructor(context, data, mediator)`\r\n- Called the first time a component is found in the markup. (note: a `scan()` must be explicitly called on the ComponentLoader for a component to be detected). \r\n\r\n- `context` - DOM node that contains the component markup\r\n- `data`- data object from ComponentLoader.scan()\r\n- `mediator` - instance of ComponentLoader for pub/sub\r\n- **NOTE:** Simply call `super(...arguments);` at the top of your constructor if you are extending the provided base component.\r\n\r\n\r\n`Component.destroy()`\r\n- Called when an instantiated component is no longer found in the markup. (note: a `scan()` must be explicitly called for this method to be triggered)\r\n\r\n`Component.publish(topic, args...)`\r\n- Publish an event to other components\r\n\r\n`Component.subscribe(topic, callback)`\r\n- Subscribe to an event from other components\r\n\r\n`*Component.unsubscribe(topic, callback)`\r\n- Unsubscribe from an event from other components\r\n\r\n`Component.scan()`\r\n- Alias for `ComponentLoader.scan()`\r\n\r\n\r\n\r\n## Browser support\r\nComponentLoader uses vanilla Javascript compatible with IE9 and up when using the ES5 version.\r\n\r\nTo run the ES6 version we recommend https://babeljs.io/\r\n\r\n\r\n## Authors\r\n- David Lindkvist [@ffdead](https://twitter.com/ffdead)\r\n- Marco Barbosa [@MarcoBarbosa](https://twitter.com/MarcoBarbosa)\r\n- Hj√∂rtur Hilmarsson [@hjortureh](https://twitter.com/hjortureh)","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}